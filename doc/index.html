<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="prism.css">
  <title>PathpartoutAPI</title>
  <header>
    <h1>PathPartout API</h1>
  </header>
</head>
<body>
  <div class="container">
    <aside>
      <div class="nav">
        <h2>Randonnées</h2>
        <ul>
          <li><a href="#all-randonnee">Toutes les randonnées</a></li>
          <li><a href="#get-randonnee">Randonnée spécifique</a></li>
          <li><a href="#only-gpx">GPX uniquement</a></li>
        </ul>
        <h2>Utilisateurs</h2>
        <ul>
          <li><a href="#create-account">Créer un utilisateur</a></li>
          <li><a href="#login-account">Se connecter</a></li>
          <li><a href="#details-account">Récupérer données utilisateur</a></li>
          <li><a href="#update-account">Mettre à jour un utilisateur</a></li>
        </ul>
        <h2>Sorties</h2>
        <ul>
          <li><a href="#create-sortie">Créer une sortie</a></li>
          <li><a href="#all-sortie">Toutes les sorties</a></li>
          <li><a href="#sortie-by-user">Récupérer les sorties par utilisateur</a></li>
        </ul>
        <h2>Avis</h2>
        <ul>
          <li><a href="#create-avis">Créer un avis</a></li>
          <li><a href="#all-avis-randonnee">Récupérer les avis par randonnée</a></li>
          <li><a href="#all-avis-user">Récupérer les avis par utilisateur</a></li>
        </ul>
        <h2>Achievements</h2>
        <ul>
          <li><a href="#list-achievements">Tous les achievements</a></li>
          <li><a href="#achievements-user">Achievements débloqué par un utilisateur</a></li>
        </ul>
      </div>
    </aside>
    <div class="content">
      <div class="content-section" id="all-randonnee">
        <h2>Toutes les randonnées</h2>
        <p>Cette route renvoi la liste des randonnées de l'API sans ordering. Elle nécessite une requête Post et un token reconnu par l'API.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/randonnees</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun</p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json">
          <code>
        [
            {
                "id": 1,
                "name": "Le Mont Veyrier",
                "difficulty": 4,
                "duration": 360,
                "pos_elevation": 966,
                "neg_elevation": 967,
                "summit": 1289,
                "start_point": {
                "name": "Petit port à Albigny",
                "coordinates": "45.903812, 6.159952"
                },
                "end_point": {
                "name": "Retour au point de départ"
                },
                "tags": [
                "Forêt",
                "Ombre",
                "Boucle"
                ]
            },
            {
                "id": 2,
                "name": "Les Clefs du tour de la Tournette",
                "difficulty": 4,
                "distance": 13.39,
                "duration": 465,
                "pos_elevation": 1379,
                "neg_elevation": 1381,
                "summit": 2341,
                "start_point": {
                "name": "Terminus de la route de la Tournette",
                "coordinates": "45.843236, 6.312728"
                },
                "end_point": {
                "name": "Retour au point de départ"
                },
                "tags": [
                "Balcons",
                "Boucle",
                "Hors-piste"
                ],
                "images": [
                "https://www.visorando.com/images/original/combe-des-fretes-visorando-125771.jpg",
                "https://www.visorando.com/images/original/ligne-de-crete-visorando-125768.jpg",
                "https://www.visorando.com/images/original/raide-couloir-visorando-125767.jpg",
                "https://www.visorando.com/images/original/balcon-de-la-tournette-visorando-125755.jpg"
                ]
            },
            
            ...

        ]
        </code>
      </pre>
      </div>
      <div class="content-section" id="get-randonnee">
        <h2>Randonnée Spécifique</h2>
        <p>Cette route renvoi la randonnée et son GPX pour un id donné. Elle nécessite une requête Post et un token reconnu par l'API.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/randonnee/:id</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p><code class="language-text">:id</code> : ID de la randonnée souhaitée</p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
        [
            {
              "id": 3,
              "name": "Promenade du Thiou",
              "difficulty": 1,
              "duration": 130,
              "pos_elevation": 46,
              "neg_elevation": 46,
              "start_point": {
                "name": "Jardins de l'Europe",
                "coordinates": "45.898454, 6.129089"
              },
              "end_point": {
                "name": "Retour au point de départ"
              },
              "tags": [
                "Rivière",
                "Facile",
                "En ville",
                "Promenade",
                "Chateau",
                "Musée"
              ],
              "gpx": {
                "type": "FeatureCollection",
                "features": [
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        6.129089,
                        45.898454,
                        444
                      ]
                    },
                    "properties": {
                      "time": "2021-02-20T16:50:23",
                      "name": "Jardins de l'Europe"
                    }
                  },
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        6.113028,
                        45.899245,
                        441
                      ]
                    },
                    "properties": {
                      "time": "2021-02-20T16:52:08",
                      "name": "Traverser par le pont du"
                    }
                  },
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        6.097352,
                        45.908853,
                        414
                      ]
                    },
                    "properties": {
                      "time": "2021-02-20T16:55:03",
                      "name": "Jardins de l'Europe"
                    }
                  },
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        6.129089,
                        45.898454,
                        444
                      ]
                    },
                    "properties": {
                      "time": "2021-02-20T16:59:43",
                      "name": "Jardins de l'Europe"
                    }
                  },
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "MultiLineString",
                      "coordinates": [
                        [
                          [
                            6.129089,
                            45.898454,
                            444
                          ],
                          [
                            6.128981,
                            45.89861,
                            444
                          ],
                          [
                            6.128413,
                            45.898431,
                            444
                          ],
                          [
                            6.127007,
                            45.898767,
                            443
                          ],
                          [
                            6.126042,
                            45.898707,
                            444
                          ],
                          [
                            6.124035,
                            45.898984,
                            444
                          ],
                          [
                            6.123928,
                            45.8992,
                            443
                          ],
                          [
                            6.123767,
                            45.899163,
                            443
                          ],
                          [
                            6.123692,
                            45.899387,
                            443
                          ],
                          [
                            6.122179,
                            45.89873,
                            444
                          ],
                          [
                            6.121106,
                            45.898648,
                            443
                          ],
                          [
                            6.120066,
                            45.898416,
                            442
                          ],
                          [
                            6.11925,
                            45.898118,
                            443
                          ],
                          [
                            6.117748,
                            45.897117,
                            443
                          ],
                          [
                            6.117373,
                            45.897072,
                            442
                          ],
                          [
                            6.116847,
                            45.897177,
                            442
                          ],
                          [
                            6.115506,
                            45.897953,
                            442
                          ],
                          [
                            6.115238,
                            45.898304,
                            441
                          ],
                          [
                            6.114948,
                            45.898424,
                            441
                          ],
                          [
                            6.113049,
                            45.898767,
                            442
                          ],
                          [
                            6.112931,
                            45.899028,
                            441
                          ],
                          [
                            6.113028,
                            45.899245,
                            441
                          ],
                          [
                            6.112577,
                            45.89935,
                            441
                          ],
                          [
                            6.112684,
                            45.899536,
                            441
                          ],
                          [
                            6.112384,
                            45.899969,
                            441
                          ],
                          [
                            6.111901,
                            45.900148,
                            442
                          ],
                          [
                            6.111579,
                            45.90044,
                            442
                          ],
                          [
                            6.111236,
                            45.901283,
                            443
                          ],
                          [
                            6.11085,
                            45.90147,
                            443
                          ],
                          [
                            6.110764,
                            45.901455,
                            444
                          ],
                          [
                            6.109927,
                            45.901933,
                            451
                          ],
                          [
                            6.109605,
                            45.902045,
                            455
                          ],
                          [
                            6.10923,
                            45.902037,
                            460
                          ],
                          [
                            6.108629,
                            45.902754,
                            457
                          ],
                          [
                            6.107309,
                            45.903508,
                            451
                          ],
                          [
                            6.106633,
                            45.903829,
                            450
                          ],
                          [
                            6.106515,
                            45.903814,
                            451
                          ],
                          [
                            6.106821,
                            45.904154,
                            443
                          ],
                          [
                            6.107062,
                            45.904375,
                            441
                          ],
                          [
                            6.106402,
                            45.904775,
                            440
                          ],
                          [
                            6.106305,
                            45.905203,
                            438
                          ],
                          [
                            6.106454,
                            45.905715,
                            438
                          ],
                          [
                            6.106709,
                            45.905857,
                            438
                          ],
                          [
                            6.106812,
                            45.906156,
                            439
                          ],
                          [
                            6.106482,
                            45.906397,
                            438
                          ],
                          [
                            6.105564,
                            45.906341,
                            435
                          ],
                          [
                            6.104672,
                            45.906767,
                            433
                          ],
                          [
                            6.103919,
                            45.906976,
                            431
                          ],
                          [
                            6.10357,
                            45.907813,
                            428
                          ],
                          [
                            6.103924,
                            45.908008,
                            429
                          ],
                          [
                            6.102315,
                            45.908204,
                            422
                          ],
                          [
                            6.101029,
                            45.907925,
                            421
                          ],
                          [
                            6.099743,
                            45.908024,
                            420
                          ],
                          [
                            6.098996,
                            45.90819,
                            418
                          ],
                          [
                            6.09778,
                            45.908643,
                            414
                          ],
                          [
                            6.097537,
                            45.908744,
                            413
                          ],
                          [
                            6.097352,
                            45.908853,
                            414
                          ],
                          [
                            6.097537,
                            45.908744,
                            413
                          ],
                          [
                            6.09778,
                            45.908643,
                            414
                          ],
                          [
                            6.098996,
                            45.90819,
                            418
                          ],
                          [
                            6.099743,
                            45.908024,
                            420
                          ],
                          [
                            6.101029,
                            45.907925,
                            421
                          ],
                          [
                            6.102315,
                            45.908204,
                            422
                          ],
                          [
                            6.103924,
                            45.908008,
                            429
                          ],
                          [
                            6.10357,
                            45.907813,
                            428
                          ],
                          [
                            6.103919,
                            45.906976,
                            431
                          ],
                          [
                            6.104672,
                            45.906767,
                            433
                          ],
                          [
                            6.105564,
                            45.906341,
                            435
                          ],
                          [
                            6.106482,
                            45.906397,
                            438
                          ],
                          [
                            6.106812,
                            45.906156,
                            439
                          ],
                          [
                            6.106709,
                            45.905857,
                            438
                          ],
                          [
                            6.106454,
                            45.905715,
                            438
                          ],
                          [
                            6.106305,
                            45.905203,
                            438
                          ],
                          [
                            6.106402,
                            45.904775,
                            440
                          ],
                          [
                            6.107062,
                            45.904375,
                            441
                          ],
                          [
                            6.106821,
                            45.904154,
                            443
                          ],
                          [
                            6.106515,
                            45.903814,
                            451
                          ],
                          [
                            6.106633,
                            45.903829,
                            450
                          ],
                          [
                            6.107309,
                            45.903508,
                            451
                          ],
                          [
                            6.108629,
                            45.902754,
                            457
                          ],
                          [
                            6.10923,
                            45.902037,
                            460
                          ],
                          [
                            6.109605,
                            45.902045,
                            455
                          ],
                          [
                            6.109927,
                            45.901933,
                            451
                          ],
                          [
                            6.110764,
                            45.901455,
                            444
                          ],
                          [
                            6.11085,
                            45.90147,
                            443
                          ],
                          [
                            6.111236,
                            45.901283,
                            443
                          ],
                          [
                            6.111579,
                            45.90044,
                            442
                          ],
                          [
                            6.111901,
                            45.900148,
                            442
                          ],
                          [
                            6.112384,
                            45.899969,
                            441
                          ],
                          [
                            6.112684,
                            45.899536,
                            441
                          ],
                          [
                            6.112577,
                            45.89935,
                            441
                          ],
                          [
                            6.113028,
                            45.899245,
                            441
                          ],
                          [
                            6.112931,
                            45.899028,
                            441
                          ],
                          [
                            6.113049,
                            45.898767,
                            442
                          ],
                          [
                            6.114948,
                            45.898424,
                            441
                          ],
                          [
                            6.115238,
                            45.898304,
                            441
                          ],
                          [
                            6.115506,
                            45.897953,
                            442
                          ],
                          [
                            6.116847,
                            45.897177,
                            442
                          ],
                          [
                            6.117373,
                            45.897072,
                            442
                          ],
                          [
                            6.117748,
                            45.897117,
                            443
                          ],
                          [
                            6.11925,
                            45.898118,
                            443
                          ],
                          [
                            6.120066,
                            45.898416,
                            442
                          ],
                          [
                            6.121106,
                            45.898648,
                            443
                          ],
                          [
                            6.122179,
                            45.89873,
                            444
                          ],
                          [
                            6.123692,
                            45.899387,
                            443
                          ],
                          [
                            6.123767,
                            45.899163,
                            443
                          ],
                          [
                            6.123928,
                            45.8992,
                            443
                          ],
                          [
                            6.124035,
                            45.898984,
                            444
                          ],
                          [
                            6.126042,
                            45.898707,
                            444
                          ],
                          [
                            6.127007,
                            45.898767,
                            443
                          ],
                          [
                            6.128413,
                            45.898431,
                            444
                          ],
                          [
                            6.128981,
                            45.89861,
                            444
                          ],
                          [
                            6.129089,
                            45.898454,
                            444
                          ]
                        ]
                      ]
                    },
                    "properties": {
                      "name": "Promenade du Thiou"
                    }
                  }
                ]
              }
            }
        ]
        </code></pre>
      </div>
      <div class="content-section" id="only-gpx">
        <h2>GPX uniquement</h2>
        <p>Cette route renvoi le fichier .GPX d'une randonnée donnée au format geojson. Elle nécessite une requête Post et un token reconnu par l'API.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/randonnee/:id/gpx</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p><code class="language-text">:id</code> : ID de la randonnée souhaitée</p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
            {
                "type": "FeatureCollection",
                "features": [
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        6.129089,
                        45.898454,
                        444
                      ]
                    },
                    "properties": {
                      "time": "2021-02-20T16:50:23",
                      "name": "Jardins de l'Europe"
                    }
                  },
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        6.113028,
                        45.899245,
                        441
                      ]
                    },
                    "properties": {
                      "time": "2021-02-20T16:52:08",
                      "name": "Traverser par le pont du"
                    }
                  },
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        6.097352,
                        45.908853,
                        414
                      ]
                    },
                    "properties": {
                      "time": "2021-02-20T16:55:03",
                      "name": "Jardins de l'Europe"
                    }
                  },

                  ...

                ]
            }
        </code></pre>
      </div>
      <div class="content-section" id="create-account">
        <h2>Créer un utilisateur</h2>
        <p>Cette route permet de créer un compte. Le mot de passe envoyé est hashé à l'aide de bcrypt pour être ensuite stocké en base.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/user/create</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>1</strong>)</p>
            <p class="request-body"><code class="language-text">email</code> : adresse email saisie par l'utilisateur</p>
            <p class="request-body"><code class="language-text">password</code> : mot de passe saisi par l'utilisateur</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
        {
            "success": "Utilisateur crée.",
            "userID": "603517e4ef23520af406fc46" <- ID de l'utilisateur crée à l'issue de la requête
        }
        </code></pre>
      </div>
      <div class="content-section" id="login-account">
        <h2>Se connecter</h2>
        <p>Cette route permet de se connecter. Pour se faire, il suffit de communiquer à l'API un combo email-password, et si l'utilisateur interrogé est enregistré en base, alors on communique un nouveau token d'accès avec un privilège supérieure.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/user/login</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>1</strong>)</p>
            <p class="request-body"><code class="language-text">email</code> : adresse email du compte à interroger</p>
            <p class="request-body"><code class="language-text">password</code> : mot de passe du compte à interroger</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          {
            "success": "Le mot de passe est bon.",
            "userId": "606f740d53b0db3c8cc064c1",
            "token": "9yV2FdhMyUy9rqwk6UI7qpmCiy4JgnMS"
          }
        </code></pre>
      </div>
      <div class="content-section" id="details-account">
        <h2>Récupérer données utilisateur</h2>
        <p>Cette route permet de récupérer les données d'un utilisateur pour un id utilisateur donné.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/user/get</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>1</strong>)</p>
            <p class="request-body"><code class="language-text">userId</code> : ID de l'utilisateur cible.</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
        [
            {
              "_id": "603517e4ef23520af406fc46",
              "firstname": "",
              "lastname": "",
              "title": "Nouvel utilisateur de PathPartout",
              "mail": "api@test.fr",
              "password": "$2b$10$EjiIDUOHItHP6teSLdnGWOhjTSORW7yGA23xE4k3YFTPlnrZyX64m",
              "privilegeLevel": 2,
              "photoUrl": "",
              "avatar": [],
              "userData": []
            }
        ]
        </code></pre>
      </div>
      <div class="content-section" id="update-account">
        <h2>Mettre à jour un utilisateur</h2>
        <p>Cette route permet 2 choses : mettre un jour un champ existant (si occurence entre un paramètre de la requête et le champ en BDD) OU créer un champ inexistant pour un utilisateur donné (si le champ envoyé en post est inconnu)</p>
        <pre class="language-shell"><span class="put">PUT</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/user/update</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
            <p class="request-body"><code class="language-text">id</code> : ID de l'utilisateur cible.</p>
            <p class="request-body"><code class="language-text">nom-du-champ</code> : Champ à modifier. (champs existants : firstname, lastname, title, mail, password, privilegeLevel, photoUrl, avatar (array), userData (array)</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
        {
          "success": "Utilisateur modifié."
        }
        </code></pre>
      </div>
      <div class="content-section" id="create-sortie">
        <h2>Créer une sortie</h2>
        <p>Cette route permet de créer une sortie. Il suffit d'envoyer à l'API un ID utilisateur et un ID de randonnée.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/sortie/create</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
            <p class="request-body"><code class="language-text">randonneeId</code> : ID de la randonnée</p>
            <p class="request-body"><code class="language-text">userId</code> : ID de l'utilisateur</p>
            <p class="request-body"><code class="language-text">performances</code> : Performances du randonneur <i>(string)[nombreDePas, temps]</i></p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          {
            "success": "Sortie créée"
          }
        </code></pre>
      </div>
      <div class="content-section" id="all-sortie">
        <h2>Toutes les sortie</h2>
        <p>Cette route permet de récupérer toutes les sorties. Il suffit d'envoyer à l'API un ID utilisateur et un ID de randonnée.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/sortie/all</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          [
            {
              "_id": "6044f1d988a3a0056cacb0e4",
              "randonneeId": 2,
              "userId": "60341ab20a00d509246a5b76",
              "date": "2021-03-06T23:00:00.000Z",
              "randonnee": [
                {
                  "name": "Les Clefs du tour de la Tournette",
                  "images": [
                    "https://www.visorando.com/images/original/combe-des-fretes-visorando-125771.jpg",
                    "https://www.visorando.com/images/original/ligne-de-crete-visorando-125768.jpg",
                    "https://www.visorando.com/images/original/raide-couloir-visorando-125767.jpg",
                    "https://www.visorando.com/images/original/balcon-de-la-tournette-visorando-125755.jpg"
                  ]
                }
              ],
              "user": [
                {
                  "firstname": "Yoan",
                  "lastname": "",
                  "mail": "yoan-rouleau@live.fr",
                  "photoUrl": ""
                }
              ]
            },
            {
              "_id": "6044f87388a3a0056cacb0e5",
              "randonneeId": 3,
              "userId": "60341ab20a00d509246a5b76",
              "date": "2021-03-06T23:00:00.000Z",
              "randonnee": [
                {
                  "name": "Promenade du Thiou",
                  "images": [
                    "https://www.visorando.com/images/inter/m-pres-de-l-ancien-lavoir-visorando-128000.jpg",
                    "https://www.visorando.com/images/inter/m-passerelle-au-dessus-de-la-chute-d-eau-visorando-73310.jpg",
                    "https://www.visorando.com/randonnee-promenade-du-thiou/#component=ajax&task=showPhoto&idPhoto=73308",
                    "https://www.caracolons-ensemble.com/images/hautesavoie/annecy/le-thiou/lachenal.JPG"
                  ]
                }
              ],
              "user": [
                {
                  "firstname": "Yoan",
                  "lastname": "",
                  "mail": "yoan-rouleau@live.fr",
                  "photoUrl": ""
                }
              ]
            },
            {
              "_id": "607190ce9a8ab03f4cc203d9",
              "randonneeId": 2,
              "userId": "60341ab20a00d509246a5b76",
              "date": "2021-04-10T11:49:34.612Z",
              "performances": "temps: 00:00 ; km: 12.4",
              "randonnee": [
                {
                  "name": "Les Clefs du tour de la Tournette",
                  "images": [
                    "https://www.visorando.com/images/original/combe-des-fretes-visorando-125771.jpg",
                    "https://www.visorando.com/images/original/ligne-de-crete-visorando-125768.jpg",
                    "https://www.visorando.com/images/original/raide-couloir-visorando-125767.jpg",
                    "https://www.visorando.com/images/original/balcon-de-la-tournette-visorando-125755.jpg"
                  ]
                }
              ],
              "user": [
                {
                  "firstname": "Yoan",
                  "lastname": "",
                  "mail": "yoan-rouleau@live.fr",
                  "photoUrl": ""
                }
              ]
            },
            {
              "_id": "6071992ed6963c0022fa32ac",
              "randonneeId": 6,
              "userId": "603517e4ef23520af406fc46",
              "date": "2021-04-10T12:25:18.448Z",
              "performances": "[0, 0:00:16]",
              "randonnee": [
                {
                  "name": "Pieds des Dents de Lanfon et Pointe de Talamarche",
                  "images": [
                    "https://www.visorando.com/images/original/arete-de-taillefer-le-lac-d-annecy-visorando-100403.jpg",
                    "https://www.visorando.com/images/original/arete-de-taillefer-duingt-visorando-100404.jpg",
                    "https://www.visorando.com/images/original/les-dents-de-lanfon-visorando-55861.jpg",
                    "https://www.visorando.com/images/original/lac-de-la-descente-visorando-148997.jpg"
                  ]
                }
              ],
              "user": [
                {
                  "firstname": "",
                  "lastname": "",
                  "mail": "api@test.fr",
                  "photoUrl": ""
                }
              ]
            },
            {
              "_id": "607313f7fe1f0f00227232a5",
              "randonneeId": 6,
              "userId": "6071d4dd36a7d3002202803c",
              "date": "2021-04-11T15:21:27.706Z",
              "performances": "[0, 0:00:08]",
              "randonnee": [
                {
                  "name": "Pieds des Dents de Lanfon et Pointe de Talamarche",
                  "images": [
                    "https://www.visorando.com/images/original/arete-de-taillefer-le-lac-d-annecy-visorando-100403.jpg",
                    "https://www.visorando.com/images/original/arete-de-taillefer-duingt-visorando-100404.jpg",
                    "https://www.visorando.com/images/original/les-dents-de-lanfon-visorando-55861.jpg",
                    "https://www.visorando.com/images/original/lac-de-la-descente-visorando-148997.jpg"
                  ]
                }
              ],
              "user": [
                {
                  "firstname": "",
                  "lastname": "",
                  "mail": "v@v.fr",
                  "photoUrl": ""
                }
              ]
            },
            {
              "_id": "60731476fe1f0f00227232a6",
              "randonneeId": 6,
              "userId": "6071d4dd36a7d3002202803c",
              "date": "2021-04-11T15:23:34.871Z",
              "performances": "[0, 0:00:04]",
              "randonnee": [
                {
                  "name": "Pieds des Dents de Lanfon et Pointe de Talamarche",
                  "images": [
                    "https://www.visorando.com/images/original/arete-de-taillefer-le-lac-d-annecy-visorando-100403.jpg",
                    "https://www.visorando.com/images/original/arete-de-taillefer-duingt-visorando-100404.jpg",
                    "https://www.visorando.com/images/original/les-dents-de-lanfon-visorando-55861.jpg",
                    "https://www.visorando.com/images/original/lac-de-la-descente-visorando-148997.jpg"
                  ]
                }
              ],
              "user": [
                {
                  "firstname": "",
                  "lastname": "",
                  "mail": "v@v.fr",
                  "photoUrl": ""
                }
              ]
            }
          ]
        </code></pre>
      </div>
      <div class="content-section" id="sortie-by-user">
        <h2>Récupérer les sorties par utilisateur</h2>
        <p>Cette route permet de récupérer les sorties réalisé par un utilisateur donné. On utilise son userId.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/sortie/get/user</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
            <p class="request-body"><code class="language-text">userId</code> : ID de l'utilisateur.</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          [
            {
              "_id": "6044f1d988a3a0056cacb0e4",
              "randonneeId": 2,
              "userId": "60341ab20a00d509246a5b76",
              "date": "2021-03-06T23:00:00.000Z"
            },
            {
              "_id": "6044f87388a3a0056cacb0e5",
              "randonneeId": 3,
              "userId": "60341ab20a00d509246a5b76",
              "date": "2021-03-06T23:00:00.000Z"
            },
            {
              "_id": "607190ce9a8ab03f4cc203d9",
              "randonneeId": 2,
              "userId": "60341ab20a00d509246a5b76",
              "date": "2021-04-10T11:49:34.612Z",
              "performances": "temps: 00:00 ; km: 12.4"
            }
          ]
        </code></pre>
      </div>
      <div class="content-section" id="create-avis">
        <h2>Créer un avis</h2>
        <p>Cette route permet de créer un avis à l'aide d'un ID de randonnée et d'un ID utilisateur. Il faut également fournir un commentaire et une note.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/avis/create</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
            <p class="request-body"><code class="language-text">randonneeId</code> : ID de la randonnée</p>
            <p class="request-body"><code class="language-text">userId</code> : ID de l'utilisateur</p>
            <p class="request-body"><code class="language-text">note</code> : Note comprise entre 0 et 5</p>
            <p class="request-body"><code class="language-text">avis</code> : L'avis complet.</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          {
            "success": "L'avis a bien été crée."
          }
        </code></pre>
      </div>
      <div class="content-section" id="all-avis-randonnee">
        <h2>Récupérer les avis par randonnée</h2>
        <p>Cette route permet de tous les avis publiés pour une randonnée donnée.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/avis/get/randonnee</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
            <p class="request-body"><code class="language-text">randonneeId</code> : ID de la randonnée</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          [
            {
              "_id": "6073f3acfae6044c54563fe2",
              "userId": "60341ab20a00d509246a5b76",
              "randonneeId": "2",
              "note": "4",
              "avis": "Superbe randonnée avec du beau temps.",
              "userData": [
                {
                  "firstname": "Yoan",
                  "lastname": "",
                  "title": "Nouvel utilisateur de PathPartout",
                  "photoUrl": ""
                }
              ]
            }
          ]
        </code></pre>
      </div>
      <div class="content-section" id="all-avis-user">
        <h2>Récupérer les avis par utilisateur</h2>
        <p>Cette route permet de tous les avis publiés pour un utilisateur donné.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/avis/get/randonnee</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
            <p class="request-body"><code class="language-text">userId</code> : ID de l'utilisateur.</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          [
            {
              "_id": "6073fc93e6411244247d3fa5",
              "userId": "6071d37636a7d3002202803b",
              "randonneeId": "6",
              "note": "5",
              "avis": "C'était très difficile, mais ça en valait la peine !"
            }
          ]
        </code></pre>
      </div>
      <div class="content-section" id="list-achievements">
        <h2>Tous les achievements</h2>
        <p>Cette route permet de lister les achievements de l'application.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/achievements/list</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          [
            {
              "_id": "6099839249627d1a70194095",
              "title": "Randonneur aguerri",
              "requires": "Terminer 5 randonnées.",
              "reward": "lunettes2"
            },
            {
              "_id": "6099839249627d1a70194097",
              "title": "Marathonien des montagnes",
              "requires": "Terminer une randonnée 2 fois plus vite que le temps annoncé.",
              "reward": "casquette2"
            },
            {
              "_id": "6099839249627d1a70194098",
              "title": "Conseiller",
              "requires": "Laisser un avis sur 3 randonnées différentes",
              "reward": "chapeau1"
            },
            {
              "_id": "6099839249627d1a70194094",
              "title": "Randonneur émergeant",
              "requires": "Terminer 3 randonnées.",
              "reward": "casquette1"
            },
            {
              "_id": "6099839249627d1a70194096",
              "title": "Randonneur expert",
              "requires": "Terminer 10 randonnées.",
              "reward": "lunettes2"
            },
            {
              "_id": "6099839249627d1a70194093",
              "title": "Randonneur du dimanche",
              "requires": "Terminer une randonnée un dimanche.",
              "reward": "lunettes1"
            },
            {
              "_id": "60998f2649627d1a70194099",
              "title": "Randonneur débutant",
              "requires": "Réalisez votre première randonnée avec l'application Pathpartout !",
              "reward": "chapeau0"
            }
          ]
        </code></pre>
      </div>
      <div class="content-section" id="achievements-user">
        <h2>Achievements débloqués par un utilisateur</h2>
        <p>Cette route permet de récupérer les achievements débloqués par un utilisateur donné, à l'aide de son ID.</p>
        <pre class="language-shell"><span class="post">POST</span> <code class="language-shell">https://pathpartoutapi.herokuapp.com/achievements/get/user</code></pre>
        <p><code class="language-text">Content-type</code> : application/json</p>
        <h3>Request parameters</h3>
        <p>- Aucun </p>
        <h3>Request body</h3>
        <div>
            <p class="request-body"><code class="language-text">token</code> : Token d'identification API (privilège requis : <strong>2</strong>)</p>
        </div>
        <div class="response-head">
          <h3>Response</h3>
          <img class="accordion-arrow" src="images/arrow.png" alt="">
        </div>
        <pre class="code-block language-json"><code>
          [
            {
              "_id": "60aebbf6abba336d980eef2a",
              "userId": "603517e4ef23520af406fc46",
              "achievementId": "6099839249627d1a70194096",
              "achievementUnlocked": [
                {
                  "_id": "6099839249627d1a70194096",
                  "title": "Randonneur expert",
                  "requires": "Terminer 10 randonnées.",
                  "reward": "lunettes2"
                }
              ]
            }
          ]
        </code></pre>
      </div>
    </div>
  </div>


  <script src="prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
  <script>
    $(document).ready(function(){
      $('.response-head').on("click", function(){
        $(this).children('.accordion-arrow').toggleClass('active');
        $(this).next('pre').toggleClass('active');
      })
    })
    
  </script>
</body>
</html>